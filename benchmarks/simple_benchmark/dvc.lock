schema: '2.0'
stages:
  train:
    cmd: python ../benchmark.py
    deps:
    - path: ../../src/
      md5: 17598cc4b61c8dbdfbe083627ad7bc46.dir
      size: 75378
      nfiles: 14
    - path: ../benchmark.py
      md5: 59942166418769f0f40e0a7ea68905e0
      size: 15001
    params:
      params.yaml:
        data:
          synthetic: true
          n_points: 1000.0
          n_dim: 16
          centers: 16
          random_state: 42
        dimm:
          n_dpu:
          - 64
          - 128
          - 256
          - 5000
        train:
          n_init: 10
          max_iter: 500
          tol: 0.0001
          n_clusters: 16
          random_state: 42
      machine.yaml:
        hostname: upmemcloud1
        nr_dpus: 1024
    outs:
    - path: benchmarks.csv
      md5: eee59e0a2939e1ab7ab49c0244974ee5
      size: 2162
    - path: metrics.json
      md5: eaf532c8f717a5e0da265058c562636d
      size: 350
    - path: plots.csv
      md5: c6b17f1edc8587fae76733fd07cf47a6
      size: 171
  host_name:
    cmd: ../get_hostname.sh
    outs:
    - path: hostname.yaml
      md5: e6000c99650874f5fd47732fd34c24c1
      size: 18
  simple_train:
    cmd: python ../benchmark.py --exp_name simple
    deps:
    - path: ../../src/
      md5: 17598cc4b61c8dbdfbe083627ad7bc46.dir
      size: 75378
      nfiles: 14
    - path: ../benchmark.py
      md5: 1716392d786c9c38635a8e1daf1c3022
      size: 14139
    params:
      hostname.yaml:
        name: upmemcloud1
      simple.yaml:
        data:
          synthetic: true
          n_points: 1000.0
          n_dim: 16
          centers: 16
          random_state: 42
        dimm:
          n_dpu:
          - 64
          - 128
          - 256
          - 5000
        train:
          n_init: 10
          max_iter: 500
          tol: 0.0001
          n_clusters: 16
          random_state: 42
    outs:
    - path: simple_benchmarks.csv
      md5: a9787e951b30f021a265e5a6d3b655d4
      size: 2185
    - path: simple_metrics.json
      md5: 55b43e09351d71e32ec009112635cde2
      size: 210
    - path: simple_plots.csv
      md5: 00bb64f2017071412662b70cfaa002b9
      size: 174
  log:
    cmd: python ../machine_log.py
    outs:
    - path: dpu_diag.txt
      md5: 7685b0b9a02223f86c36fb362e2e289f
      size: 5084
    - path: machine.yaml
      md5: c987f498d066a7bdedb8a18892245ffa
      size: 36
