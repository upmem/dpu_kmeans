schema: '2.0'
stages:
  download:
    cmd: wget https://archive.ics.uci.edu/ml/machine-learning-databases/00280/HIGGS.csv.gz
    deps:
    - path: https://archive.ics.uci.edu/ml/machine-learning-databases/00280/HIGGS.csv.gz
      checksum: '"a7def932-4f263a606f300"'
      size: 2816407858
    outs:
    - path: HIGGS.csv.gz
      md5: 6130f7b2e2d59315467ecc0adf4b3271
      size: 2816407858
  unzip:
    cmd: gunzip -k HIGGS.csv.gz
    deps:
    - path: HIGGS.csv.gz
      md5: 6130f7b2e2d59315467ecc0adf4b3271
      size: 2816407858
    outs:
    - path: HIGGS.csv
      md5: e921e5b01ff78d3bdc899ee204c64e94
      size: 8035497980
  host_name:
    cmd: ../get_hostname.sh
    outs:
    - path: hostname.yaml
      md5: ea421fca94eb11f3c16bf7f986871cc7
      size: 18
  serialize:
    cmd: python convert_to_pq.py
    deps:
    - path: HIGGS.csv
      md5: e921e5b01ff78d3bdc899ee204c64e94
      size: 8035497980
    outs:
    - path: higgs.pq
      md5: 88e1d7c72cb43c66729d0c1869ce6d7d.dir
      size: 952426437
      nfiles: 241
  train:
    cmd: python ../benchmark.py
    deps:
    - path: ../../src/
      md5: 0eddb62a0e9772f7854c28a8165fb387.dir
      size: 82144
      nfiles: 20
    - path: ../benchmark.py
      md5: 58fd0829ec48bd5ca3138b2119f1e05c
      size: 13048
    - path: data/higgs.pq
      md5: 88e1d7c72cb43c66729d0c1869ce6d7d.dir
      size: 952426437
      nfiles: 241
    params:
      params.yaml:
        data:
          synthetic: false
          name: higgs
        dimm:
          n_dpu:
          - 256
          - 512
          - 1024
          - 2048
          - 2523
        train:
          n_init: 10
          max_iter: 500
          tol: 0.0001
          n_clusters: 2
          random_state: 42
      hostname.yaml:
        name: upmemcloud1
    outs:
    - path: benchmarks.csv
      md5: b910df956cd8dd8175dd1c8eb03e9987
      size: 1997
    - path: results.csv
      md5: 930849df919a6adfa80c7f147d26110b
      size: 123
